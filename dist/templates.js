window.templates={"any":{"dump.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  res['R'] = ctx.getRequestProperties();\n  res['Q'] = ctx.getQueryProperties();\n  res['C'] = ctx.getConfigProperties();\n  res['S'] = ctx.getSessionProperties();\n\n  writer.start('application/json');\n  writer.write(JSON.stringify(res, null, 2));\n  writer.end();\n});\n"},"default.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  writer.start('text/html');\n\n  writer.write('name:' + res.name);\n  writer.write('<h1>render types:</h1>');\n  writer.write('<ul>');\n\n  var types = res.renderTypes;\n  for (var i = 0; i < types.length; i++) {\n    writer.write('<li>' + types[i] + '</li>');\n  }\n  writer.write('</ul>');\n\n  writer.write('<h1>properties:</h1>');\n  writer.write('<ul>');\n\n  for (var name in res._) {\n    var val = res._[name];\n    writer.write('<li>' + name + '=' + val + '</li>');\n  }\n\n  writer.write('</ul>');\n\n  var w = writer.makeNestedContentWriter();\n  ctx.listResourceNames('.').then(function (children) {\n    w.write('<h1>children:</h1>');\n    w.write('<ul>');\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      w.write('<li>' + child + '</a></li>');\n    }\n    w.write('</ul>');\n    w.end();\n  });\n\n  writer.end();\n})\n"},"json.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer) {\n  writer.start('application/json');\n  writer.write(JSON.stringify(res, null, 2));\n  writer.end();\n});\n"},"pre-render.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  writer.end();\n});\n"},"pre-store.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  res['_md'] = '' + (new Date().getTime());\n\n  writer.write(res);\n  writer.end();\n});\n"}},"mime":{"text":{"css":{"minimize.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  var clientside = (typeof window != 'undefined');\n  var xref = res['_xref'];\n\n  if (xref) {\n    var url = escape(xref);\n    writer.start('text/plain');\n    writer.write(url);\n    writer.end();\n  }\n  else if (clientside) {\n    if (res['isContentResource']) {\n      ctx.readResource('.', new ContentWriterAdapter('blob', function (data, ctype) {\n        var blob = new Blob([data], {\n          type: ctype ? ctype : 'application/octet-binary'\n        });\n        var url = URL.createObjectURL(blob);\n\n        writer.start('text/plain');\n        writer.write(`<link rel=\"stylesheet\" href=\"${url}\"></link>`);\n        writer.end();\n      }));\n    }\n    else {\n      writer.error(new Error('resource has no content'));\n      writer.end();\n    }\n  }\n  else {\n    var url = ctx.pathInfo.resourcePath;\n    writer.start('text/plain');\n    writer.write(`<link rel=\"stylesheet\" href=\"${url}\"></link>`);\n    writer.end();\n  }\n});\n"}},"javascript":{"minimize.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  var clientside = (typeof window != 'undefined');\n  var xref = res['_xref'];\n\n  if (xref) {\n    var url = escape(xref);\n    writer.start('text/plain');\n    writer.write(url);\n    writer.end();\n  }\n  else if (clientside) {\n    if (res['isContentResource']) {\n      ctx.readResource('.', new ContentWriterAdapter('blob', function (data, ctype) {\n        var blob = new Blob([data], {\n          type: ctype ? ctype : 'application/octet-binary'\n        });\n        var url = URL.createObjectURL(blob);\n\n        writer.start('text/plain');\n        writer.write(`<script src=\"${url}\"></script>`);\n        writer.end();\n      }));\n    }\n    else {\n      writer.error(new Error('resource has no content'));\n      writer.end();\n    }\n  }\n  else {\n    var url = ctx.pathInfo.resourcePath;\n    writer.start('text/plain');\n    writer.write(`<script>${url}</script>`);\n    writer.end();\n  }\n});\n"}}}},"resource":{"content":{"default.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  ctx.readResource('.', writer);\n});\n"},"edit.css":{"_ct":"text/css","_pt":"resource/content","_content":"html,body {\n  height: 100%;\n  margin: 0px;\n}\nbody {\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column;\n}\n.head {\n  margin: 4px;\n  margin-left: 8px;\n  flex: 0 1 auto;\n}\n\nform {\n  flex: 1 1 auto;\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\ntextarea:focus {\n  outline: none !important;\n}\n\n#text_form textarea {\n  margin: 0;\n}\n\ntextarea {\n  border-radius: 0;\n  border: 1px solid black;\n  resize: none;\n  box-sizing: border-box;\n  padding-left: 8px;\n  display: block;\n  width: 100%;\n  height: 100%;\n  font-family: monospace;\n  font-size: 11px;\n}\n\n#pdf_view, #image_view {\n  border: 0;\n  flex: 1 1 auto;\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.head .buttons {\n  display: inline-block;\n  float: right;\n}\n.head .paths {\n  margin: 0;\n  display: inline-block;\n}\n\nbody.small .head {\n  display: none;\n}\n"},"edit.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/content/edit.css\" \"resource/res-ui.css\"}}\n  {{include_js \"resource/content/scrollfix.js\"}}\n\n  <title>edit:{{R.PATH}}</title>\n</head>\n\n<body>\n  <div class=\"head\">\n    <ol class=\"paths\">\n      <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n      <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n      <li>{{name}}</li>\n    </ol>\n\n{{#match isTextContentResource}}\n    <div class=\"buttons\">\n      <a href=\"{{req_path \"..\" \"res-list\"}}\">cancel</a>\n      <button type=\"submit\" form=\"text_form\">save</button>\n    </div>\n\n  </div>\n\n  <form method=\"post\" action=\"{{res_path R.PATH}}\" id=\"text_form\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n\n    <textarea autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" autofocus=\"on\" spellcheck=\"false\" name=\"_content\">{{include_safe \".\" \"text\"}}</textarea>\n\n    <input type=\"hidden\" name=\"_rt\" value=\"resource/content\"></input>\n    <input type=\"hidden\" name=\"_ct\" value=\"{{contentType}}\"></input>\n  </form>\n\n{{/match}}\n{{#match contentType \"startsWith\" \"image/\"}}\n    <div class=\"toolbar\">\n      <a href=\"{{req_path \"..\" \"res-list\"}}\">cancel</a>\n      <a target=\"_blank\" href=\"{{include \".\" \"externalize\"}}\">view</a>\n    </div>\n\n  </div>\n\n  <img src=\"{{include \".\" \"externalize\"}}\" id=\"image_view\"></img>\n\n{{/match}}\n{{#match contentType \"startsWith\" \"application/pdf\"}}\n\n    <div class=\"toolbar\">\n      <a href=\"{{req_path \"..\" \"res-list\"}}\">cancel</a>\n      <a target=\"_blank\" href=\"{{include \".\" \"externalize\"}}\">open</a>\n    </div>\n  \n  </div>\n\n  <iframe src=\"{{include \".\" \"externalize\"}}\" id=\"pdf_view\"></iframe>\n\n{{/match}}\n{{#default}}\n\n    <div>unknown file type of {{contentType}}</div>\n    <a href=\"{{include \".\" \"externalize\"}}\" download target=\"_blank\">Download</a>\n\n{{/default}}\n</body>\n\n</html>\n"},"externalize.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  var clientside = (typeof window != 'undefined');\n  var xref = res['_xref'];\n\n  if (xref) {\n    var url = escape(xref);\n    writer.start('text/plain');\n    writer.write(url);\n    writer.end();\n  }\n  else if (clientside) {\n    if (res['isContentResource']) {\n      ctx.readResource('.', new ContentWriterAdapter('blob', function (data, ctype) {\n        var blob = new Blob([data], {\n          type: ctype ? ctype : 'application/octet-binary'\n        });\n        var url = URL.createObjectURL(blob);\n\n        writer.start('text/plain');\n        writer.write(url);\n        writer.end();\n      }));\n    }\n    else {\n      writer.error(new Error('resource has no content'));\n      writer.end();\n    }\n  }\n  else {\n    var url = ctx.pathInfo.resourcePath;\n    writer.start('text/plain');\n    writer.write(url);\n    writer.end();\n  }\n});\n"},"import.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  var path = ctx.getCurrentDataPath();\n\n  ctx.readResource('.', new ContentWriterAdapter('utf8', function (buff) {\n    ctx.storeResource(path, {\n      '_content':buff,\n      ':import':path\n    }, \n    function() {\n      writer.start('text/plain');\n      writer.write('done');\n      writer.end();\n    });\n  }));\n});\n"},"res-importto.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  <title>Import to</title>\n\n  <link href=\"{{C.BOOTSTRAP_CSS}}\" rel=\"stylesheet\">\n</head>\n\n<body>\n\n  <div role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <a class=\"close\" href=\"{{C.P}}{{R.PATH_APPEND}}../{{C.X}}res-list\"><span aria-hidden=\"true\">&times;</span></a>\n          <h4 class=\"modal-title\">Import Resources</h4>\n        </div>\n        <div class=\"modal-body\">\n\n          <h1>Import archive</h1>\n\n          <ol class=\"breadcrumb\">\n            <li class=\"active\">HOME</li>\n            {{#include \".\" \"parents\"}}\n              <li class=\"active\">{{name}}</li>\n            {{/include}}\n            <li>{{R.NAME}}</li>\n          </ol>\n\n          <h1>to</h1>\n\n          <ol class=\"breadcrumb\">\n            <li><a href=\"{{C.P}}{{R.PATH}}{{C.X}}res-importto/\">HOME</a></li>\n            {{#include R.DATA_PATH \"parents\"}}\n              <li><a href=\"{{C.P}}{{R.PATH}}{{C.X}}res-importto{{path}}\">{{name}}</a></li>\n            {{/include}}\n            <li class=\"active\">{{R.DATA_NAME}}</li>\n          </ol>\n\n          <form method=\"post\" action=\"{{C.P}}{{R.PATH}}{{C.X}}import{{R.DATA_PATH}}\">\n            <table class=\"table\">\n              {{#include R.DATA_PATH \"children\"}}\n                {{#if isContentResource}}\n                  <tr>\n                    <td>\n                      <i class=\"glyphicon glyphicon-file\"></i> {{name}}\n                    </td>\n                  </tr>\n                {{else}}\n                  <tr>\n                    {{#match path \"!startsWith\" R.PATH}}\n                      <td>\n                        <i class=\"glyphicon glyphicon-folder-close\"></i> <a href=\"{{C.P}}{{R.PATH}}{{C.X}}res-importto{{path}}\">{{name}}</a>\n                      </td>\n                    {{/match}}\n                  </tr>\n                {{/if}}\n\n              {{/include}}\n\n            </table>\n\n            <input type=\"hidden\" name=\":forward\" value=\"{{C.P}}{{R.DATA_PATH}}{{C.X}}res-list\">\n\n            <div class=\"modal-footer\">\n              <a class=\"btn btn-default\" href=\"{{C.P}}{{R.PATH_APPEND}}../{{C.X}}res-list\">Cancel</a>\n              <input class=\"btn btn-success\" type=\"submit\" value=\"Import\">\n            </div>\n\n          </form>\n        </div><!-- /.modal-content -->\n      </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n\n</body>\n\n</html>\n"},"res-list.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  let x = context.getConfigProperty('X');\n  context.forwardRequest(context.getCurrentResourcePath()+x+'edit');\n  writer.end();\n});\n"},"scrollfix.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"function scroll_fix() {\n  let h = window.visualViewport.height;\n  document.body.style.height = h+'px';\n\n  window.ontouchend = function(evt) {\n    if (window.pageYOffset < 5) return;\n\n    window.scrollTo(0, -1);\n    setTimeout(function() {\n      window.scrollTo(0, -1);\n    },50);\n\n    evt.preventDefault();\n    evt.stopPropagation();\n  };\n}\n\nfunction scroll_unfix() {\n  window.scrollTo(0, -1);\n  window.ontouchend = null;\n  window.onscroll = null;\n  document.body.style.height = null;\n}\n\nwindow.visualViewport.addEventListener('resize', function(evt) {\n  if (window.visualViewport.height < 200) {\n    document.body.classList.add('small');\n  }\n  else {\n    document.body.classList.remove('small');\n  }\n\n  if (window.visualViewport.height < window.document.body.clientHeight) {\n    window.scrollTo(0, -1);\n    setTimeout(function() {\n      scroll_fix();\n    }, 300);\n  }\n  else {\n    scroll_unfix();\n  }\n\n});\n"},"text.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  if (res && res['isContentResource']) {\n    ctx.readResource('.', new ContentWriterAdapter('utf8', function (data, ctype) {\n      writer.start('text/plain');\n      writer.write(data);\n      writer.end();\n    }));\n  }\n  else {\n    writer.error(new Error('resource has no content'));\n    writer.end();\n  }\n});\n"}},"index":{"children.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  writer.start('object/javascript');\n  var qp = context.getQueryProperties();\n  var qry = '';\n\n  if (qp && qp['q']) qry = qp['q'];\n  if (!qry) {\n    writer.write([]);\n    writer.end();\n    return;\n  }\n\n  context.currentResource.searchResources(qry, function (children) {\n    var rv = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var res = children[i];\n      var map = {};\n\n      map['name'] = res.getName();\n      map['score'] = res.getProperty('score');\n      map['ref'] = res.getProperty('reference');\n      map['path'] = Utils.filename_path_append(context.getCurrentResourcePath(), name);\n\n      rv.push(map);\n    }\n\n    writer.write(rv);\n    writer.end();\n  });\n})\n"},"res-create.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>index content</title>\n</head>\n\n<body>\n\n  <h3>Index Resource Content\n    <a class=\"button\" href=\"{{req_path \".\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>Index Text</h4>\n\n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <textarea autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" autofocus=\"on\" spellcheck=\"false\" name=\"_content\"></textarea>\n    <input name=\":name|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"reference path\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">index</button>\n  </form>\n\n  <h4>Index File</h4>\n\n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input type=\"file\" name=\":filename\" value=\"\">\n    <input name=\":name|:filename|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"reference path\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">upload</button>\n  </form>\n\n  <h4>Import File</h4>\n          \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path R.PATH}}\">\n    <input class=\"form-control\" type=\"file\" name=\":import\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">import</button>\n  </form>\n\n</body>\n</html>\n"},"res-list.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>Index Search</title>\n</head>\n\n<body>\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <form method=\"get\" action=\"{{req_path \".\" \"res-list\"}}\">\n    <a class=\"button\" href=\"{{req_path \".\" \"res-create\"}}\">create</a>\n    <a class=\"button\" href=\"{{req_path \".\" \"/_THE_INDEX_\" \"res-delete\"}}\">clear</a>\n    <input name=\"q\" type=\"text\" placeholder=\"search\" value=\"{{Q.q}}\">\n    <button type=\"submit\">search</button>\n  </form>\n\n  <table>\n{{#include \".\" \"children\"}}\n    <tr>\n      <td>\n        <a href=\"{{req_path ref \"res-list\"}}\">{{name}}</a>\n      </td>\n      <td>\n        {{score}}\n      </td>\n      <td>\n        <a href=\"{{req_path \".\" ref \"res-delete\"}}\">d</a>\n      </td>\n    </tr>\n{{/include}}\n  </table>\n\n</body>\n</html>\n"}},"node":{"children.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let children = await ctx.listResources('.');\n  let rv = [];\n\n  children.sort(function(a, b) {\n    return a.name.localeCompare(b.name);\n  });\n\n  writer.write(children);\n})\n"},"dev-tools.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"let el = document.createElement('div');\nel.style.position = 'fixed';\nel.style.top = '0';\nel.style.right = '10px';\nel.style.border = '1px solid black';\nel.style.backgroundColor = 'gray';\n\nlet rbut = document.createElement('div');\nrbut.innerHTML = 'R';\nrbut.addEventListener('click', function() {\n  let u = window.location.toString();\n  window.open(u+'.@res-list');\n});\n\nlet tbut = document.createElement('div');\ntbut.innerHTML = 'T';\ntbut.addEventListener('click', function() {\n  let u = window.location.toString();\n  window.open(u+'.@res-renderer');\n});\n\nlet dbut = document.createElement('div');\ndbut.innerHTML = 'D';\ndbut.addEventListener('click', function() {\n  let u = window.location.toString();\n  window.open(u+'.@dump');\n});\n\nlet xbut = document.createElement('div');\nxbut.innerHTML = 'X';\nxbut.addEventListener('click', function() {\n  showTraceMarkers(document.body.childNodes);\n});\n\nel.appendChild(rbut);\nel.appendChild(tbut);\nel.appendChild(dbut);\nel.appendChild(xbut);\n\ndocument.body.appendChild(el);\n\nfunction showTraceMarkers(ls) {\n  for (let i = 0; i < ls.length; i++) {\n    let node = ls[i];\n    if (node.nodeType == 8) {\n      let val = node.nodeValue;\n      let el = document.createElement('div');\n      el.style.backgroundColor = 'yellow';\n      el.innerHTML = val;\n      node.parentNode.replaceChild(el, node);\n    }\n    else {\n      showTraceMarkers(node.childNodes);\n    }\n  }\n}\n"},"export.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  let out = writer;\n  let processing = 0;\n  let ended = false;\n  let count = 0;\n  let path = context.getCurrentDataPath();\n\n  let export_content = function (data) {\n    let func = data['_content'];\n    let ct = data['_ct'];\n    let bin = true;\n\n    if (Utils.is_texttype(ct)) bin = false;\n\n    func(new ContentWriterAdapter(bin ? null : 'utf8', function (buff) {\n\n      if (bin) {\n        data['_ct'] = 'base64:' + (ct ? ct : '');\n        data['_content'] = Utils.ArrayBuffer2base64(buff);\n      }\n      else data['_content'] = buff;\n\n      if (count > 0) out.write('\\n,\\n');\n      out.write(JSON.stringify(data, null, 2));\n\n      processing--;\n      done();\n    }));\n  };\n\n  let done = function () {\n    if (processing === 0 && ended) {\n      out.write('\\n]');\n      out.end();\n      if (out !== writer) writer.end();\n    }\n  };\n\n  let export_children = function () {\n    let path = res['path'];\n    context.exportAllResources(path, 0, {\n      start: function (ctype) {\n        out.start('application/package-json');\n        out.write('[\\n');\n      },\n      write: function (data) {\n\n        if (data.values['_content']) {\n          processing++;\n          export_content(data.values); //might contain func!\n        }\n        else {\n          if (count > 0) out.write('\\n,\\n');\n          out.write(JSON.stringify(data.getValues(), null, 2));\n        }\n        count++;\n      },\n      error: function (err) {\n        console.log(err);\n      },\n      end: function () {\n        ended = true;\n        done();\n      }\n    }, true);\n  };\n\n  if (path) {\n    context.resolveResource(path).then(function(ores) {\n      if (ores) {\n        out = ores.getWriter();\n        export_children();\n      }\n      else {\n        context.storeAndResolveResource(path, {'_content':''}).then(function(ores) {\n          out = ores.getWriter();\n          export_children();\n        });\n      }\n    });\n  }\n  else {\n    export_children();\n  }\n\n});\n"},"flushcache.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  writer.start('text/plain');\n\n  if (res.flushResourceCache) {\n    res.flushResourceCache();\n    writer.write('DONE');\n  }\n  else {\n    writer.write('NOT_SUPPORTED');\n  }\n\n  writer.end();\n})\n"},"keyvalues.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  writer.start('object/javascript');\n  \n  let rv = [];\n  let names = Object.keys(res._);\n\n  names.sort(function(a, b) {\n    return a.localeCompare(b);\n  });\n\n  for (var i = 0; i < names.length; i++) {\n    var name = names[i];\n    var val = res._[name];\n\n    rv.push({\n      name: name,\n      value: val\n    });\n  }\n\n  writer.write(rv);\n  writer.end();\n})\n"},"parentpaths.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  var path = ctx.getCurrentResourcePath();\n\n  var parentPaths = [];\n  var ps = Utils.split_path(path);\n  ps.pop();\n\n  while (ps.length > 0) {\n    var rpath = ps.join('/');\n    var name = ps.pop();\n    var map = res.clone();\n\n    if (name === '') continue;\n\n    map['path'] = '/' + rpath;\n    map['name'] = name;\n\n    parentPaths.unshift(map);\n  }\n\n  writer.write(parentPaths);\n  writer.end();\n\n});\n"},"parents.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n\n  let path = ctx.getCurrentResourcePath();\n\n  let parentResources = [];\n  let parentPaths = [];\n  let ps = Utils.split_path(path);\n  ps.pop();\n\n  while (1) {\n    let rpath = ps.join('/');\n    if (rpath == '') break;\n    \n    let r = await ctx.resolveResource('/'+rpath);\n    parentResources.unshift(r);\n\n    ps.pop();\n  }\n\n  writer.write(parentResources);\n  writer.end();\n});\n"},"properties.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  writer.start('object/javascript');\n  writer.write(res._);\n  writer.end();\n})\n"},"res-copyto.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>copy to</title>\n</head>\n\n<body>\n  <h3>Copy \"{{name}}\"\n    <a class=\"button\" href=\"{{req_path \"../\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>to</h4>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \".\" \"res-copyto\"}}/\">HOME</a></li>\n{{#include R.DATA_PATH \"parents\"}}\n    <li><a href=\"{{req_path \".\" \"res-copyto\"}}{{path}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{R.DATA_NAME}}</li>\n  </ol>\n\n  <ol>\n{{#include R.DATA_PATH \"children\"}}\n  {{#if isContentResource}}\n    <li>{{name}}</li>\n  {{else}}\n    {{#match path \"!startsWith\" ../R.PATH}}\n    <li>\n      <a href=\"{{req_path \".\" \"res-copyto\"}}{{path}}\">{{name}}</a>\n    </li>\n    {{/match}}\n  {{/if}}\n{{/include}}\n  </ol>\n\n  <h4>name</h4>\n  <form method=\"post\" action=\"{{R.PATH}}\">\n\n    <input name=\":name|newUUID\" value=\"Copy of {{R.NAME}}\" autocorrect=\"off\" autocapitalize=\"off\" autocomplete=\"off\" spellcheck=\"false\">\n    <input type=\"hidden\" name=\":copyto\" value=\"{{res_path R.DATA_PATH \"{:name}\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.DATA_PATH \"res-list\"}}\">\n\n    <button type=\"submit\">copy</button>\n  </form>\n\n  <h3>Export</h3>\n\n  <a class=\"button\" target=\"_blank\" href=\"{{req_path \".\" \"export\"}}\">as JSON</a>\n  <a class=\"button\" href=\"{{req_path \".\" \"res-exportto\"}}{{R.DATA_PATH}}\">to resource...</a>\n{{#if isContentResource}}\n  <a class=\"button\" href=\"{{req_path \".\" \"res-importto\"}}{{R.DATA_PATH}}\">import into...</a>\n{{/if}}\n\n</body>\n</html>\n"},"res-create.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>create</title>\n</head>\n\n<body>\n\n  <h3>Create New Resource in \"{{name}}\" \n    <a class=\"button\" href=\"{{req_path \".\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>Resource Node</h4>\n  \n  <form method=\"post\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input name=\":name|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"name\">\n\n    <select name=\"_rt\">\n      <option value=\"\">type not set</option>\n      <option disabled>user templates:</option>\n{{#include C.USER_TEMPLATES \"rendertemplates\"}}\n      <option value=\"{{this}}\">{{this}}</option>\n{{/include}}\n    </select>\n              \n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">add</button>\n  </form>\n\n  <h4>Empty File</h4>\n\n  <form method=\"post\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input name=\":name|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"file name\">\n    <input type=\"hidden\" name=\"_content\" value=\"\"></input>\n    \n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"res-list\"}}\">\n    <button type=\"submit\">add</button>\n  </form>\n\n  <h4>Upload File</h4>\n\n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input type=\"file\" name=\":filename\" value=\"\">\n    <input name=\":name|:filename|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"file name\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"res-list\"}}\">\n    <button type=\"submit\">upload</button>\n  </form>\n\n  <h4>Import File</h4>\n  \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{R.PATH}}\">\n    <input type=\"file\" name=\":import\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"res-list\"}}\">\n\n    <button type=\"submit\">import</button>\n  </form>\n\n</body>\n</html>\n"},"res-delete.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>delete:{{R.PATH}}</title>\n</head>\n\n<body>\n  <h3>Delete\n    <a class=\"button\" href=\"{{req_path \"../\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>Are you sure you want to delete \"{{name}}\"?</h4>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\"_rt\" value=\"{{renderType}}\">\n    <input type=\"hidden\" name=\":delete\" value=\"{{res_path \".\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{ref_path \"/../\" \"res-list\"}}\">\n    <button type=\"submit\">delete</button>\n  </form>\n\n</body>\n\n</html>\n"},"res-exportto.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>export to</title>\n</head>\n\n<body>\n  <h3>Export from\n    <a class=\"button\" href=\"{{req_path \"../\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h1>to</h1>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \".\" \"res-exportto\"}}/\">HOME</a></li>\n{{#include R.DATA_PATH \"parents\"}}\n    <li><a href=\"{{req_path \".\" \"res-exportto\"}}{{path}}\">{{name}}</a></li>\n{{/include}}\n    <li class=\"active\">{{R.DATA_NAME}}</li>\n  </ol>\n\n  <ol>\n{{#include R.DATA_PATH \"children\"}}\n  {{#if isContentResource}}\n    <li>{{name}}</li>\n  {{else}}\n    {{#match path \"!startsWith\" R.PATH}}\n    <li>\n      <a href=\"{{req_path \".\" \"res-exportto\"}}{{path}}\">{{name}}</a>\n    </li>\n    {{/match}}\n  {{/if}}\n{{/include}}\n  </ol>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}{{C.X}}export{{res_path R.DATA_PATH \"{:name}\"}}\">\n    <input name=\":name|newUUID\" value=\"{{R.NAME}}.json\" autocorrect=\"off\" autocapitalize=\"off\" autocomplete=\"off\" spellcheck=\"false\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.DATA_PATH \"res-list\"}}\">\n    <button type=\"submit\">export</button>\n  </form>\n\n</body>\n\n</html>\n"},"res-list-actions.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"{{#if renderType}}\n  <a target=\"_blank\" href=\"{{req_path path \"\"}}\">v</a>\n{{/if}}\n\n  <a href=\"{{req_path path \"res-delete\"}}\">d</a>\n  <a href=\"{{req_path path \"res-copyto\"}}{{path}}/..\">c</a>\n  <a href=\"{{req_path path \"res-moveto\"}}{{path}}/..\">m</a>\n  <a href=\"{{req_path path \"res-properties\"}}\">p</a>\n"},"res-list.css":{"_ct":"text/css","_pt":"resource/content","_content":"table {\n  width: 100%;\n  border-spacing: 0;\n  margin-bottom: 1rem;\n}\n\ntable td {\n  border-left: 1px solid black;\n  padding-left: 4px;\n}\n"},"res-list.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"user-scalable=no,width=device-width, initial-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n  \n  {{include_css \"resource/res-ui.css\" \"resource/node/res-list.css\"}}\n\n  <title>list:{{R.PATH}}</title>\n</head>\n\n<body>\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <div class=\"buttons\">\n    <a href=\"{{req_path \".\" \"res-create\"}}\">n</a>\n    <a href=\"{{req_path \".\" \"res-renderer\"}}\">r</a>\n{{#if renderType}}\n    <a href=\"{{req_path C.USER_TEMPLATES \"/\" renderType \"res-list\"}}\">t</a>\n    <a target=\"_blank\" href=\"{{req_path \".\" \"default\"}}\">render as ({{renderType}})</a>\n{{/if}}\n    <a target=\"_blank\" href=\"{{req_path \".\" \"dump\"}}\">x</a>\n    <a href=\"{{req_path \".\" \"res-properties\"}}\">props</a>\n  </div>\n\n  <table>\n{{#include \".\" \"keyvalues\"}}\n    <tr>\n      <td>\n        {{name}}\n      </td>\n      <td>\n        {{value}}\n      </td>\n    </tr>\n{{/include}}\n  </table>\n\n  <table>\n{{#include \".\" \"children\"}}\n  {{#if isContentResource}}\n    <tr>\n      <td>\n        <a href=\"{{req_path path \"edit\"}}\">{{name}}</a>\n      </td>\n      <td>\n        {{contentType}} ({{contentSize}})\n      </td>\n      <td>\n        {{include path \"res-list-actions\"}}\n      </td>\n    </tr>\n  {{else}}\n    <tr>\n      <td>\n        <a href=\"{{req_path path}}\">{{name}}</a>\n      </td>\n      <td>\n    {{#if renderType}}\n        <a href=\"{{req_path C.USER_TEMPLATES \"/\" renderType \"res-list\"}}\">{{renderType}}</a>\n    {{else}}\n        {{type}}\n    {{/if}}\n        <a href=\"{{req_path path \"res-renderer\"}}\">renderer</a>\n      </td>\n      <td>\n        {{include path \"res-list-actions\"}}\n      </td>\n    </tr>\n  {{/if}}\n{{/include}}\n  </table>\n</body>\n\n</html>\n"},"res-moveto.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>move to</title>\n</head>\n\n<body>\n  <h3>Move \"{{name}}\"\n    <a class=\"button\" href=\"{{req_path \"../\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>to</h4>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \".\" \"res-moveto\"}}/\">HOME</a></li>\n{{#include R.DATA_PATH \"parents\"}}\n    <li><a href=\"{{req_path \".\" \"res-moveto\"}}{{path}}\">{{name}}</a></li>\n{{/include}}\n    <li class=\"active\">{{R.DATA_NAME}}</li>\n  </ol>\n\n  <ol>\n{{#include R.DATA_PATH \"children\"}}\n  {{#if isContentResource}}\n    <li>{{name}}</li>\n  {{else}}\n    {{#match path \"!startsWith\" ../R.PATH}}\n    <li>\n      <a href=\"{{req_path \".\" \"res-moveto\"}}{{path}}\">{{name}}</a>\n    </li>\n    {{/match}}\n  {{/if}}\n{{/include}}\n  </ol>\n\n  <form method=\"POST\" action=\"{{R.PATH}}\">\n    <h4>name</h4>\n    \n    <input name=\":name|newUUID\" value=\"{{R.NAME}}\" autocorrect=\"off\" autocapitalize=\"off\" autocomplete=\"off\" spellcheck=\"false\">\n    <input type=\"hidden\" name=\":moveto\" value=\"{{res_path R.DATA_PATH \"{:name}\"}}\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.DATA_PATH \"res-list\"}}\">\n\n    <button type=\"submit\">move</button>\n  </form>\n\n</body>\n</html>\n"},"res-properties.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\" \"resource/node/res-list.css\"}}\n\n  <title>properties:{{R.PATH}}</title>\n</head>\n\n<body>\n\n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <div class=\"buttons\">\n    <a href=\"{{req_path \".\" \"res-renderer\"}}\">r</a>\n    <a href=\"{{req_path \".\" \"res-list\"}}\">list</a>\n  </div>\n\n  <h4>Resource Properties</h4>\n\n  <table>\n{{#include \".\" \"keyvalues\"}}\n    <tr>\n      <td>{{name}}</td>\n      <td>\n        <input name=\"{{name}}\" value=\"{{value}}\" form=\"save_form\" autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"false\">\n      </td>\n      <td>\n        <button type=\"submit\" form=\"save_form\" style=\"display:none\">+</button>\n        <form method=\"post\" action=\"{{res_path \".\"}}\">\n          <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n          <button type=\"submit\" name=\"{{name}}\">-</button>\n        </form>\n      </td>\n    </tr>\n{{/include}}\n    <tr>\n      <td>\n        <input name=\":name\" value=\"\" autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"false\" placeholder=\"name\" form=\"save_form\">\n      </td>\n      <td>\n        <input name=\"{:name}\" value=\"\" autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"false\" placeholder=\"value\" form=\"save_form\">\n      </td>\n      <td>\n        <button type=\"submit\" form=\"save_form\">+</button>\n      </td>\n    </tr>\n  </table>\n\n  <form method=\"post\" action=\"{{res_path \".\"}}\" id=\"save_form\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\"}}\">\n  </form>\n\n</body>\n</html>\n"},"res-renderer.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>renderer properties</title>\n</head>\n\n<body>\n\n  <h3>Renderer Properties\n    <a class=\"button\" href=\"{{req_path R.PATH \"res-list\"}}\">cancel</a>\n  </h3>\n \n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n  \n  <h4>Set User Defined Renderers</h4>\n    \n  <p>User defined renderer templates are stored in <a href=\"{{req_path C.USER_TEMPLATES \"/\" renderType \"res-list\"}}\">{{C.USER_TEMPLATES}}/{{renderType}}</a>\n  <a class=\"button\" href=\"{{req_path C.USER_TEMPLATES \"res-create\"}}\">create template...</a>\n  </p>\n\n  <h4>Renderer will take following types into consideration</h4>\n  <ol>\n{{#if renderType}}\n      <li>renderType: <b>{{renderType}}</b></li>\n{{else}}\n      <li>renderType: <b>no type set</b></li>\n{{/if}}\n{{#if renderSuperType}}\n      <li>renderSuperType: <b>{{renderSuperType}}</b></li>\n{{/if}}\n{{#if contentType}}\n      <li>contentType: mime/<b>{{contentType}}</b></li>\n{{/if}}\n      <li>resourceType: <b>{{type}}</b></li>\n{{#if superType}}\n      <li>superType: <b>{{superType}}</b></li>\n{{/if}}\n      <li>fallback: <b>any/any</b></li>\n  </ol>          \n\n  <form method=\"post\" id=\"save_form\" action=\"{{R.PATH}}\">\n    <label>render type</label>\n    <select name=\"_rt\">\n      <option value=\"\">not set</option>\n      <option disabled>-</option>\n{{#include C.USER_TEMPLATES \"rendertemplates\"}}\n      <option value=\"{{this}}\" {{eq this ../renderType \"selected\"}}>{{this}}</option>\n{{/include}}\n    </select>\n            \n    <label class=\"col-sm-4\">render super type</label>\n    <select class=\"form-control\" name=\"_st\">\n      <option value=\"\">not set</option>\n      <option disabled>-</option>\n{{#include C.USER_TEMPLATES \"rendertemplates\"}}\n      <option value=\"{{this}}\" {{eq this ../renderSuperType \"selected\"}}>{{this}}</option>\n{{/include}}\n    </select>\n\n    <input type=\"hidden\" name=\":forward\" value=\"{{ref_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">save</button>\n  </form>\n\n</body>\n\n</html>\n"}},"notfound":{"default.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  //send 404 only if we are requesing this resource directly\n  if (context.getCurrentRequestPath() === context.getCurrentResourcePath()) {\n    context.sendStatus(404);\n    writer.end();\n  }\n  else {\n    writer.end();\n  }\n});\n"},"res-list.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  <title>Delete</title>\n\n  <link href=\"{{C.BOOTSTRAP_CSS}}\" rel=\"stylesheet\">\n</head>\n\n<body>\n\n  <div role=\"dialog\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <a class=\"close\" href=\"{{C.P}}{{R.PATH_APPEND}}../{{C.X}}res-list\"><span aria-hidden=\"true\">&times;</span></a>\n          <h4 class=\"modal-title\">Resource Not Found</h4>\n        </div>\n        <div class=\"modal-body\">\n\n          <ol class=\"breadcrumb\">\n            <li><a href=\"{{C.P}}/{{C.X}}res-list\">HOME</a></li>\n            {{#include \".\" \"parents\"}}\n              <li><a href=\"{{C.P}}{{path}}{{C.X}}res-list\">{{name}}</a></li>\n            {{/include}}\n            <li class=\"active\">{{R.NAME}}</li>\n          </ol>\n\n          <h4>Resource\"{{name}} not found, create?\"</h4>\n\n        </div>\n        <div class=\"modal-footer\">\n          <form class=\"form-inline\" method=\"post\" action=\"{{C.P}}{{R.PATH}}\">\n            <a class=\"btn btn-default\" href=\"{{C.P}}{{R.PATH_APPEND}}../{{C.X}}res-list\">Cancel</a>\n            <input type=\"hidden\" name=\":forward\" value=\"{{C.P}}{{R.PATH_APPEND}}{{C.X}}res-list\">\n            <input class=\"btn btn-success\" type=\"submit\" value=\"Create\">\n          </form>\n\n        </div>\n      </div><!-- /.modal-content -->\n    </div><!-- /.modal-dialog -->\n  </div><!-- /.modal -->\n\n</body>\n\n</html>\n\n"}},"redirect":{"default.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, context) {\n  let rurl = res._['redirect'];\n  if (rurl && context.getCurrentRequestPath() === context.getCurrentResourcePath()) {\n    let pref = context.getConfigProperty('APP_PREFIX');\n    if (pref) rurl = pref + rurl;\n\n    context.forwardRequest(rurl);\n    writer.end();\n  }\n  else {\n    writer.end();\n  }\n});\n"}},"res-ui.css":{"_ct":"text/css","_pt":"resource/content","_content":"body {\n  font-family: system-ui;\n  font-size: small;\n}\n\n.paths li {\n  display: inline-block;\n}\n\n.paths li a {\n  border-right: 1px solid black;\n  padding-right: 4px;\n  text-decoration: none;\n}\n\n.paths {\n  padding-inline-start: 0;\n}\n\n.toolbar {\n  margin-bottom: 1rem;\n}\n\nh3 a {\n  font-weight: bold;\n  float: right;\n  text-decoration: none;\n  padding: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\nbutton, .button, .buttons > * {\n  font-weight: bold;\n  display: inline-flex;\n  border: 1px solid black;\n  padding: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n  color: black;\n  background-color: white;\n  text-decoration: none;\n  font-size: small;\n  box-sizing: border-box;\n  font-family: system-ui;\n  text-align: center;\n}\n\nselect {\n  border: 0;\n  border-radius: 0;\n  padding-left: 2px !important;\n  border-left: 1px solid black;\n  border-bottom: 1px solid black;\n  width: 150px;\n  padding: 0;\n  outline: 0;\n  -webkit-appearance: none;\n}\n\ninput[type=file] {\n  font-size: x-small;\n  border-left: 1px solid black;\n  border-bottom: 1px solid black;\n  padding: 1px;\n  width: 150px;\n}\n\ninput[type=file]::file-selector-button {\n  width: 1px !important;\n  opacity: 0;\n  border: 0;\n  -webkit-appearance: none;\n}\n\ntd form {\n  display: inline-block;\n}\n\ntd input {\n  width: 100%;\n}\n\ninput {\n  box-sizing: border-box;\n  border: 0;\n  border-bottom: 1px dotted black;\n  border-radius: 0;\n}\n\nform textarea {\n  display: block;\n  width: 100%;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n@media only screen and (hover: none) {\n  body {\n    font-family: system-ui;\n  }\n\n  button, .button, .buttons > * {\n    min-width: 32px;\n    font-size: large;\n  }\n}\n\n"},"root":{"res-create.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>create</title>\n</head>\n\n<body>\n\n  <h3>Create New Root Resource\n    <a class=\"button\" href=\"{{req_path \".\" \"res-list\"}}\">cancel</a>\n  </h3>\n\n  <h4>Temporary ObjectResource</h4>\n\n  <form method=\"post\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input name=\":name|newUUID\" value=\"\" autocomplete=\"off\" placeholder=\"name\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n    <button type=\"submit\">add</button>\n  </form>\n\n  <h4>Import File</h4>\n  \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{R.PATH}}\">\n    <input type=\"file\" name=\":import\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"res-list\"}}\">\n\n    <button type=\"submit\">import</button>\n  </form>\n\n</body>\n</html>\n"}},"templates":{"rendertemplates.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(async function (res, writer, ctx) {\n  writer.start('object/javascript');\n  \n  let types = [];\n  \n  await ctx.listAllResourceNames('.', function (path) {\n    if (path.indexOf('.') > 0) {\n      let name = Utils.filename(path);\n      let dir = Utils.filename_dir(path).substr(1);\n      if (!types.includes(dir)) types.push(dir);\n    }\n  });\n\n  writer.write(types.sort());\n  writer.end();\n});\n"},"res-create.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>create</title>\n</head>\n\n<body>\n\n  <h3>Create New Template in \"{{name}}\"\n    <a class=\"button\" href=\"{{req_path \".\" \"res-list\"}}\">cancel</a>\n  </h3>\n  \n  <ol class=\"paths\">\n    <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n    <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n    <li>{{name}}</li>\n  </ol>\n\n  <h4>Renderer Template</h4>\n\n  <p>\n    Renderer template is resolved by scanning for a file matching specific naming convention pattern.\n  <p>\n    Pattern is composed of these parts: <br>\n    <span>resource type</span> - usually a directory<br>\n    <span>selector</span> - \"default\" or what gets appended after \"{{C.X}}\" like \"json\" for {{C.X}}json\n  <p>\n    for example:\n  <ul>\n    <li><span>web/mycomponent/</span><b>default.hbs</b></li>\n  </ul>\n\n  <form method=\"post\" action=\"{{R.PATH}}/{:name}/{:sel}.{:ext}\">\n    <input name=\":name\" value=\"{{R.DATA_PATH}}\" placeholder=\"full path\" required=\"\" autocomplete=\"off\">\n    {{C.X}}\n    <input name=\":sel\" value=\"default\" placeholder=\"selector\" required=\"\" autocomplete=\"off\">\n    .\n    <select name=\":ext\" style=\"width:40px\">\n      <optgroup label=\"Handlebars\">\n        <option value=\"hbs\">hbs</option>\n      </optgroup>\n      <optgroup label=\"Javascript\">\n        <option value=\"js\">js</option>\n      </optgroup>\n    </select>\n\n    <input type=\"hidden\" name=\"_content\" value=\"\"> \n    <input type=\"hidden\" name=\"_rt\" value=\"resource/content\"> \n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path \".\" \"/{:name}/{:sel}.{:ext}\" \"edit\"}}\">\n\n    <button type=\"submit\" value=\"add\">add</button>\n  </form>\n\n  <h4>Create Directory</h4>\n\n  <form method=\"post\" action=\"{{res_path R.PATH \"{:name}\"}}\">\n    <input name=\":name\" value=\"\" required=\"\" placeholder=\"full path\" autocomplete=\"off\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n\n    <button type=\"submit\" value=\"add\">add</button>\n  </form>\n\n  <h4>Upload File</h4>\n  \n  <form method=\"post\" enctype=\"multipart/form-data\" action=\"{{res_path R.PATH}}\">\n    <input type=\"file\" name=\":import\" value=\"\">\n    <input type=\"hidden\" name=\":forward\" value=\"{{req_path R.PATH \"res-list\"}}\">\n\n    <button type=\"submit\">upload</button>\n  </form>\n\n</body>\n</html>\n"}}},"factory":{"hbs":{"pre-render.js":{"_ct":"text/javascript","_pt":"resource/content","_content":"(function (res, writer, ctx) {\n  var Handlebars = res.Handlebars;\n  \n/*\n * path \".\"\n * path \"/content\" \"res-list\"\n * APP_PREFIX for client side\n */\n\n  var path_func = function () {\n    var args = arguments;\n    var context = args[args.length-1].data.root;\n    var rv = [];\n    var i = 0;\n\n    if (context.C['APP_PREFIX']) rv.push(context.C['APP_PREFIX']);\n    if (context.C['P']) rv.push(context.C['P']);\n\n    for (;i < (args.length-1); i++) {\n      var p = args[i];\n      if (i == 0) {\n        if (p == '.') p = context.R['PATH'];\n        else p = Utils.absolute_path(p, context.R['PATH']);\n      }\n      else if (args.length > 2 && i == args.length-2) {\n        if (p !== '' && p.indexOf('.') === -1 && context.C['X']) rv.push(context.C['X']);\n      }\n      rv.push(p);\n    }\n\n    if (args.length == 2) {\n      if (context.R['SELECTOR']) {\n        rv.push(context.C['X']);\n        rv.push(context.R['SELECTOR']);\n        if (context['Q']) {\n          i = 0;\n          for (var k in context['Q']) {\n            if (i == 0) rv.push('?');\n            else rv.push('&');\n            var v = context['Q'][k];\n            rv.push(escape(k));\n            rv.push('=');\n            rv.push(escape(v));\n          }\n        }\n      }\n    }\n\n    return rv.join('');\n  };\n\n  var include_paths = function (tag, paths, block) {\n    var context = block.data.root._context;\n    var session = block.data.root._session;\n    var p = session.makeOutputPlaceholder();\n\n    var render_content = function(path) {\n      context.resolveTemplateResourceContent(path).then(function(buff) {\n        p.write(buff);\n\n        var pp = paths.shift();\n        if (pp) render_content(pp);\n        else {\n          p.write('</'+tag+'>');\n          p.end();\n        }\n      });\n    };\n\n    p.write('<'+tag+'>');\n    render_content(paths.shift());\n\n    return p.placeholder;\n  };\n\n  Handlebars.registerHelper('ref_path', function () {\n    var context = arguments[arguments.length-1].data.root;\n    var refurl = context.R['REF_URL'];\n\n    if (refurl) return refurl;\n    else return path_func.apply(this, arguments);\n  });\n\n  Handlebars.registerHelper('req_path', path_func);\n\n  Handlebars.registerHelper('res_path', function () {\n    var args = arguments;\n    var context = args[args.length-1].data.root;\n    var rv = [];\n    var i = 0;\n\n    for (;i < (args.length-1); i++) {\n      var p = args[i];\n      rv.push(p);\n    }\n\n    var p = rv.join('/');\n    return Utils.absolute_path(p, context.R['RES_PATH']);\n  });\n\n  Handlebars.registerHelper('set_Q', function (name, val, block) {\n    if (arguments.length == 3) {\n      var context = block.data.root._context\n      if (!context.pathInfo['query']) context.pathInfo['query'] = {};\n      context.pathInfo['query'][name] = val;\n    }\n    return '';\n  });\n\n/*\n * return first not emoty argument\n */\n\n  Handlebars.registerHelper('or', function () {\n    var args = arguments;\n\n    for (var i = 0; i < args.length-1; i++) {\n      if (args[i] !== null && args[i] !== undefined) return args[i];\n    }\n    return '';\n  });\n\n/*\n * if all arguments are non-empty, return return last argument\n */\n\n  Handlebars.registerHelper('and', function () {\n    var args = arguments;\n\n    for (var i = 0; i < args.length-1; i++) {\n      if (!args[i]) return '';\n    }\n\n    return args[args.length-2];\n  });\n\n  Handlebars.registerHelper('val', function () {\n    var args = arguments;\n\n    if (!args[0]) return null;\n    else return args[1].replace('%s', args[0]);\n  });\n\n\n  Handlebars.registerHelper('eq', function (lvalue, rvalue, result, options) {\n    if (lvalue === rvalue) return result;\n    else return null;\n  });\n\n  /************************************************************************\n\n  {{#match Database.Tables.Count \">\" 5}}\n  There are more than 5 tables\n  {{/match}}\n\n  {{#match \"Test\" \"Test\"}}\n  Default comparison of \"===\"\n  {{/match}}\n\n   ************************************************************************/\n\n  Handlebars.registerHelper('match', function (lvalue, operator, rvalue, options) {\n    var operators = null;\n    var result = null;\n\n    if (arguments.length < 3) {\n      if (lvalue) {\n        operator.data.root._match_rval = true;\n        return operator.fn(this);\n      }\n      else return operator.inverse(this);\n    }\n\n    if (options === undefined) {\n      options = rvalue;\n      rvalue = operator;\n      operator = \"===\";\n    }\n\n    operators = {\n      '==': function (l, r) {\n        return l == r;\n      },\n      '===': function (l, r) {\n        return l === r;\n      },\n      '!=': function (l, r) {\n        return l != r;\n      },\n      '!==': function (l, r) {\n        return l !== r;\n      },\n      '<': function (l, r) {\n        return l < r;\n      },\n      '>': function (l, r) {\n        return l > r;\n      },\n      '<=': function (l, r) {\n        return l <= r;\n      },\n      '>=': function (l, r) {\n        return l >= r;\n      },\n      'startsWith': function (l, r) {\n        if (l && l.indexOf(r) === 0) return true;\n        else return false;\n      },\n      '!startsWith': function (l, r) {\n        if (l && l.indexOf(r) === 0) return false;\n        else return true;\n      },\n      'typeof': function (l, r) {\n        return typeof l == r;\n      }\n    };\n\n    if (!operators[operator]) {\n      throw new Error(\"Handlerbars Helper 'compare' doesn't know the operator \" + operator);\n    }\n\n    result = operators[operator](lvalue, rvalue);\n    if (result) options.data.root._match_rval = true;\n\n    if (result) return options.fn(this);\n    else return options.inverse(this);\n  });\n\n  Handlebars.registerHelper('default', function (options) {\n    var result = false;\n\n    if (options.data.root._match_rval) result = true;\n    delete options.data.root._match_rval;\n\n    if (!result) return options.fn(this);\n    else return options.inverse(this);\n  });\n\n  Handlebars.registerHelper('trace', function () {\n    var block = arguments[arguments.length-1];\n    var args = [];\n    var renpath = null;\n    var respath = null;\n    for (var i = 0; i < arguments.length-1; i++) {\n      var it = arguments[i];\n      if (typeof it === 'string') {\n        args.push(it);\n      }\n      else {\n        var rv = {};\n        for (var key in it) {\n          var val = it[key];\n          if (key === '_context') continue;\n          if (key === '_session') continue;\n      \n          rv[key] = val;\n        }\n\n        args.push(JSON.stringify(rv, null, 2));\n      }\n    }\n\n    if (block && block['data'] && block['data']['root']) {\n      var ctx = block['data']['root']['_context'];\n      renpath = Utils.get_trace_path(ctx['traceRenderInfo']);\n      respath = Utils.get_trace_path(ctx['currentResource']);\n\n      if (renpath) args.push('ren:'+renpath);\n      if (respath) args.push('res:'+respath);\n    }\n\n    var txt = '<!-- '+args.join(' ')+' -->';\n    return new Handlebars.SafeString(txt);\n  });\n\n  Handlebars.registerHelper('include_css', function () {\n    if (arguments.length < 2) return ''\n\n    var block = arguments[arguments.length-1];\n    var args = [];\n    for (var i = 0; i < arguments.length-1; i++) {\n      args.push(arguments[i]);\n    }\n\n    return include_paths.apply(this, ['style', args, block]);\n  });\n\n  Handlebars.registerHelper('include_js', function () {\n    if (arguments.length < 2) return ''\n\n    var block = arguments[arguments.length-1];\n    var args = [];\n    for (var i = 0; i < arguments.length-1; i++) {\n      args.push(arguments[i]);\n    }\n\n    return include_paths.apply(this, ['script', args, block]);\n  });\n\n  Handlebars.registerHelper('dump', function (block) {\n    if (!block) return '';\n    var rv = {};\n    var context = block['data']?block.data.root:block;\n\n    for (var key in context) {\n      var val = context[key];\n      if (key === '_context') continue;\n      if (key === '_session') continue;\n      \n      rv[key] = val;\n    }\n\n    return JSON.stringify(rv, null, 2);\n  });\n\n  writer.end();\n});\n"}}},"system":{"shell":{"edit.hbs":{"_ct":"text/plain","_pt":"resource/content","_content":"<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <link rel=\"icon\" href=\"data:;base64,iVBORw0KGgo=\">\n\n  {{include_css \"resource/res-ui.css\"}}\n\n  <title>shell:{{R.PATH}}</title>\n</head>\n  <style>\n    #commandline {\n      width: 100%;\n    }\n  </style>\n  <script>\n      window.addEventListener('DOMContentLoaded', function() {\n        var cmd = document.querySelector('#commandline');\n        if (cmd) {\n          cmd.focus();\n        }\n      });\n  </script>\n\n<body>\n  <div class=\"head\">\n    <ol class=\"paths\">\n      <li><a href=\"{{req_path \"/\" \"res-list\"}}\">HOME</a></li>\n{{#include \".\" \"parents\"}}\n      <li><a href=\"{{req_path path \"res-list\"}}\">{{name}}</a></li>\n{{/include}}\n      <li>{{name}}</li>\n    </ol>\n\n    <pre>\n    </pre>\n\n    <form method=\"post\" action=\"{{res_path R.PATH}}\">\n      <input type=\"hidden\" name=\"_rt\" value=\"system/shell\">\n      <input id=\"commandline\" type=\"text\" autocorrect=\"off\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"false\" name=\":command\">\n    </form>\n\n  </div>\n</body>\n\n</html>\n"}}},"_md":"1695316283348"}
